{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useRef, useEffect } from 'react';\n\nconst useCanvas = (draw, type) => {\n  _s();\n\n  const canvasRef = useRef(null);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    let stageWidth = window.innerWidth;\n    let stageHeight = window.innerHeight;\n\n    const resize = () => {\n      const ratio = window.devicePixelRatio;\n      stageWidth = window.innerWidth;\n      stageHeight = window.innerHeight;\n      canvas.width = stageWidth * ratio;\n      canvas.height = stageHeight * ratio;\n      canvas.style.width = stageWidth + 'px';\n      canvas.style.height = stageHeight + 'px';\n      canvas.style.position = 'absolute';\n      document.body.style.margin = '0';\n      ctx.scale(ratio, ratio);\n      window.addEventListener('resize', resize);\n      draw(ctx, stageWidth, stageHeight);\n    };\n\n    let animationFrameId;\n\n    const animate = () => {\n      // draw(ctx, stageWidth, stageHeight);\n      let img = new Image(); // ctx.beginPath();\n      // ctx.arc(400, 400, 40, 0, Math.PI * 2);\n      // ctx.fillStyle = 'red';\n      // ctx.fill();\n\n      ctx.drawImage(img, 200, 200, 80, 80);\n      img.src = `../images/sun.png`; // ctx.closePath();\n\n      if (type === 'dynamic') {\n        animationFrameId = window.requestAnimationFrame(animate);\n      }\n    };\n\n    resize();\n    animate();\n    return () => {\n      if (type === 'dynamic') {\n        window.cancelAnimationFrame(animationFrameId);\n      }\n\n      window.removeEventListener('resize', resize);\n    };\n  }, [draw, type]);\n  return canvasRef;\n};\n\n_s(useCanvas, \"UJgi7ynoup7eqypjnwyX/s32POg=\");\n\nexport default useCanvas;","map":{"version":3,"sources":["/Users/jehong/Programming/Portfolio/CanvasAnimationReact/src/Hooks/useCanvas.js"],"names":["useRef","useEffect","useCanvas","draw","type","canvasRef","canvas","current","ctx","getContext","stageWidth","window","innerWidth","stageHeight","innerHeight","resize","ratio","devicePixelRatio","width","height","style","position","document","body","margin","scale","addEventListener","animationFrameId","animate","img","Image","drawImage","src","requestAnimationFrame","cancelAnimationFrame","removeEventListener"],"mappings":";;AAAA,SAASA,MAAT,EAAiBC,SAAjB,QAAkC,OAAlC;;AAEA,MAAMC,SAAS,GAAG,CAACC,IAAD,EAAOC,IAAP,KAAgB;AAAA;;AAChC,QAAMC,SAAS,GAAGL,MAAM,CAAC,IAAD,CAAxB;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMK,MAAM,GAAGD,SAAS,CAACE,OAAzB;AACA,UAAMC,GAAG,GAAGF,MAAM,CAACG,UAAP,CAAkB,IAAlB,CAAZ;AACA,QAAIC,UAAU,GAAGC,MAAM,CAACC,UAAxB;AACA,QAAIC,WAAW,GAAGF,MAAM,CAACG,WAAzB;;AAEA,UAAMC,MAAM,GAAG,MAAM;AACnB,YAAMC,KAAK,GAAGL,MAAM,CAACM,gBAArB;AAEAP,MAAAA,UAAU,GAAGC,MAAM,CAACC,UAApB;AACAC,MAAAA,WAAW,GAAGF,MAAM,CAACG,WAArB;AAEAR,MAAAA,MAAM,CAACY,KAAP,GAAeR,UAAU,GAAGM,KAA5B;AACAV,MAAAA,MAAM,CAACa,MAAP,GAAgBN,WAAW,GAAGG,KAA9B;AAEAV,MAAAA,MAAM,CAACc,KAAP,CAAaF,KAAb,GAAqBR,UAAU,GAAG,IAAlC;AACAJ,MAAAA,MAAM,CAACc,KAAP,CAAaD,MAAb,GAAsBN,WAAW,GAAG,IAApC;AACAP,MAAAA,MAAM,CAACc,KAAP,CAAaC,QAAb,GAAwB,UAAxB;AACAC,MAAAA,QAAQ,CAACC,IAAT,CAAcH,KAAd,CAAoBI,MAApB,GAA6B,GAA7B;AAEAhB,MAAAA,GAAG,CAACiB,KAAJ,CAAUT,KAAV,EAAiBA,KAAjB;AAEAL,MAAAA,MAAM,CAACe,gBAAP,CAAwB,QAAxB,EAAkCX,MAAlC;AACAZ,MAAAA,IAAI,CAACK,GAAD,EAAME,UAAN,EAAkBG,WAAlB,CAAJ;AACD,KAlBD;;AAoBA,QAAIc,gBAAJ;;AAEA,UAAMC,OAAO,GAAG,MAAM;AACpB;AACA,UAAIC,GAAG,GAAG,IAAIC,KAAJ,EAAV,CAFoB,CAGpB;AACA;AACA;AACA;;AACAtB,MAAAA,GAAG,CAACuB,SAAJ,CAAcF,GAAd,EAAmB,GAAnB,EAAwB,GAAxB,EAA6B,EAA7B,EAAiC,EAAjC;AACAA,MAAAA,GAAG,CAACG,GAAJ,GAAW,mBAAX,CARoB,CASpB;;AAEA,UAAI5B,IAAI,KAAK,SAAb,EAAwB;AACtBuB,QAAAA,gBAAgB,GAAGhB,MAAM,CAACsB,qBAAP,CAA6BL,OAA7B,CAAnB;AACD;AACF,KAdD;;AAeAb,IAAAA,MAAM;AACNa,IAAAA,OAAO;AAEP,WAAO,MAAM;AACX,UAAIxB,IAAI,KAAK,SAAb,EAAwB;AACtBO,QAAAA,MAAM,CAACuB,oBAAP,CAA4BP,gBAA5B;AACD;;AACDhB,MAAAA,MAAM,CAACwB,mBAAP,CAA2B,QAA3B,EAAqCpB,MAArC;AACD,KALD;AAMD,GApDQ,EAoDN,CAACZ,IAAD,EAAOC,IAAP,CApDM,CAAT;AAsDA,SAAOC,SAAP;AACD,CA1DD;;GAAMH,S;;AA4DN,eAAeA,SAAf","sourcesContent":["import { useRef, useEffect } from 'react';\n\nconst useCanvas = (draw, type) => {\n  const canvasRef = useRef(null);\n  \n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    let stageWidth = window.innerWidth;\n    let stageHeight = window.innerHeight;\n    \n    const resize = () => {\n      const ratio = window.devicePixelRatio;\n\n      stageWidth = window.innerWidth;\n      stageHeight = window.innerHeight;\n\n      canvas.width = stageWidth * ratio;\n      canvas.height = stageHeight * ratio;\n\n      canvas.style.width = stageWidth + 'px';\n      canvas.style.height = stageHeight + 'px';\n      canvas.style.position = 'absolute';\n      document.body.style.margin = '0';\n\n      ctx.scale(ratio, ratio);\n      \n      window.addEventListener('resize', resize);\n      draw(ctx, stageWidth, stageHeight);\n    }\n\n    let animationFrameId;\n\n    const animate = () => {\n      // draw(ctx, stageWidth, stageHeight);\n      let img = new Image();\n      // ctx.beginPath();\n      // ctx.arc(400, 400, 40, 0, Math.PI * 2);\n      // ctx.fillStyle = 'red';\n      // ctx.fill();\n      ctx.drawImage(img, 200, 200, 80, 80);\n      img.src = `../images/sun.png`;\n      // ctx.closePath();\n      \n      if (type === 'dynamic') {\n        animationFrameId = window.requestAnimationFrame(animate);\n      }\n    }\n    resize();\n    animate();\n    \n    return () => {\n      if (type === 'dynamic') {\n        window.cancelAnimationFrame(animationFrameId);\n      }\n      window.removeEventListener('resize', resize);\n    }\n  }, [draw, type]);\n  \n  return canvasRef\n}\n\nexport default useCanvas;"]},"metadata":{},"sourceType":"module"}